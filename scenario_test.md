# シナリオテスト仕様書

本ドキュメントは、システムのシナリオテスト仕様をまとめたものです。

## 1. シナリオテスト概要

本システムは、AWS S3バケットからCSVファイルをダウンロードし、データの検証・加工を行い、再度S3へアップロードするバッチ処理を提供します。シナリオテストでは、主な機能フローに沿って、正常系・異常系の動作を確認します。

## 2. シナリオ一覧

| シナリオID | 概要 | 前提条件 | 入力 | 期待結果 |
|------------|------|----------|------|----------|
| S1-1 | S3からCSVファイルを正常にダウンロードできる | S3に対象CSVが存在 | バケット名、プレフィックス、日付 | 指定CSVがローカルにダウンロードされる |
| S1-2 | データ検証・加工が正常に行われる | columns.txtが正しく設定 | 正常なCSVファイル | 型・日付・数値チェックが正しく行われ、不要カラム削除・欠損値補完が実施される |
| S1-3 | 不正値・欠損値が検出された場合に警告が出力される | 不正値・欠損値を含むCSV | 不正値・欠損値を含むCSV | ワーニングがリスト形式で出力される、欠損値は空文字に補完される |
| S1-4 | 複数CSVファイルのZIP圧縮・S3アップロードが正常に行われる | 複数CSVが存在 | 複数CSVファイル | ZIPファイルが作成され、S3にアップロードされる |

## 3. シナリオ詳細

### S1-1: S3からCSVファイルを正常にダウンロードできる
- 前提条件: S3に対象CSVが存在すること
- 手順:
  1. バケット名、プレフィックス、日付を指定してダウンロード処理を実行
- 期待結果: 指定CSVがローカルにダウンロードされる

### S1-2: データ検証・加工が正常に行われる
- 前提条件: columns.txtが正しく設定されていること
- 手順:
  1. 正常なCSVファイルを用意
  2. データ検証・加工処理を実行
- 期待結果: 型・日付・数値チェックが正しく行われ、不要カラム削除・欠損値補完が実施される

### S1-3: 不正値・欠損値が検出された場合に警告が出力される
- 前提条件: 不正値・欠損値を含むCSVファイルを用意
- 手順:
  1. データ検証・加工処理を実行
- 期待結果: ワーニングがリスト形式で出力される、欠損値は空文字に補完される

### S1-4: 複数CSVファイルのZIP圧縮・S3アップロードが正常に行われる
- 前提条件: 複数CSVファイルが存在すること
- 手順:
  1. 複数CSVファイルを用意
  2. ZIP圧縮・S3アップロード処理を実行
- 期待結果: ZIPファイルが作成され、S3にアップロードされる

## 4. 参考
- 本仕様書はBD_DD.mdの設計内容に基づき作成しています。
